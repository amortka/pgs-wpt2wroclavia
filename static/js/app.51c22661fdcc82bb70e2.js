webpackJsonp([1],{24:function(e,t,i){"use strict";function n(e,t,i){var n=t.clone().sub(e),a=n.length();return n=n.normalize().multiplyScalar(a*i),e.clone().add(n)}function a(e,t,i){return new r.q(e,t,i)}function s(e,t){return(new r.q).subVectors(e,t)}t.b=n,t.a=a,t.c=s;var r=i(12)},41:function(e,t,i){function n(e){i(88)}var a=i(21)(i(51),i(92),n,"data-v-0bc1a407",null);e.exports=a.exports},42:function(e,t,i){"use strict";var n=i(23),a=i(95),s=i(91),r=i.n(s),o=i(41),c=i.n(o);n.a.use(a.a),t.a=new a.a({routes:[{path:"/",name:"Landing",component:r.a},{path:"/debug",name:"ThreeDebug",component:c.a,props:{isActive:!0,step:0}}]})},43:function(e,t,i){function n(e){i(89)}var a=i(21)(i(49),i(93),n,null,null);e.exports=a.exports},44:function(e,t,i){"use strict";function n(e,t){var n=v.f,a=new l.h;if(t.edges){var s=new l.j(e),r=new l.k(s,v.g.edgesMat);r.scale.set(n,n,n),t.position&&r.position.copy(i.i(f.a)(t.position[0],t.position[1],t.position[2])),a.add(r)}if(t.wireframe){var o=new l.l(e,v.g.wireframeMat);o.scale.set(n,n,n),t.position&&o.position.copy(i.i(f.a)(t.position[0],t.position[1],t.position[2])),a.add(o)}if(t.faces){var c=new l.l(e,v.g.facesMat);c.scale.set(n,n,n),t.position&&c.position.copy(i.i(f.a)(t.position[0],t.position[1],t.position[2])),a.add(c)}return a}var a=i(25),s=i.n(a),r=i(26),o=i.n(r),c=i(27),d=i.n(c),l=i(12),u=i(40),h=(i.n(u),i(39)),f=(i.n(h),i(24)),p=i(47),v=i(45),m=i(46),w=function(){function e(t){o()(this,e),this.scene=new l.a,this.clock=new l.b,this.models={},this.currentModel="wpt",this.currentStep=t.step||0,this.container=t.container,this.flags={isActive:t.active,isDebug:t.debug,isInitialized:!1,isLoaded:!1,isTransition:!1}}return d()(e,[{key:"addCamera",value:function(){var e=new l.c(50,this.WIDTH/this.HEIGHT,1,1e4);e.lookAt(this.scene.position),this.camera=e}},{key:"addHelpers",value:function(){var e=new l.d(10),t=new l.e(1e3,1e3);this.scene.add(e),this.scene.add(t)}},{key:"loadModels",value:function(){var e=this,t=new l.f,a=new l.g(t);this.planetLoader=new p.a;var r=this.planetLoader.getMesh();return this.scene.add(r),this.setCamera(i.i(f.a)(0,0,100),i.i(f.a)(0,0,0)),this.animate(),new s.a(function(i){var s=new l.h,o=new l.h;m.a.forEach(function(e){a.load(""+v.a.models+e.model,function(t){s.add(n(t,e))})}),m.b.forEach(function(e){a.load(""+v.a.models+e.model,function(t){o.add(n(t,e))})}),t.onProgress=function(e,t,i){console.log("Loading file: "+e+" Loaded. "+t+" of "+i+" files.")},t.onLoad=function(){var t={progress:0};h.TweenMax.to(t,v.b,{progress:1,onStart:function(){e.planetLoader.activate()},onUpdate:function(){e.planetLoader.updateFaces(t.progress)},onComplete:function(){e.models.wpt=s,e.models.wroclavia=o,e.planetLoader.dispose().then(function(){e.flags.isLoaded=!0,e.scene.remove(r),i()})}})}})}},{key:"initRenderer",value:function(){var e=new l.i({alpha:!0,antialias:!0});e.shadowMap.soft=!0,e.shadowMap.enabled=!0,e.setSize(this.WIDTH,this.HEIGHT),this.container.appendChild(e.domElement),this.renderer=e}},{key:"initEvents",value:function(){this.flags.isUserControl?this.controls.addEventListener("change",this.render):document.addEventListener("mousemove",i.i(u.throttle)(this.onDocumentMouseMove.bind(this),50),!1),window.addEventListener("resize",this.updateSize.bind(this),!1)}},{key:"updateSize",value:function(){this.WIDTH=this.container.offsetWidth,this.HEIGHT=this.container.offsetHeight,this.flags.isInitialized&&(this.camera.aspect=this.WIDTH/this.HEIGHT,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.render())}},{key:"onDocumentMouseMove",value:function(e){if(!this.flags.isTransition){this.moveProgress=e.clientX/this.WIDTH,this.moveOffset=(e.clientY-this.HEIGHT)/2/(this.HEIGHT/2);var t=v.c[this.currentStep][1],n=v.c[this.currentStep][2];this.cameraMove=i.i(f.b)(t,n,this.moveProgress),this.cameraMove.y=(this.cameraMove.y-this.moveOffset)*v.d}}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"animate",value:function(){if(this.flags.isActive){if(this.flags.isLoaded){if(this.cameraMove){var e=i.i(f.c)(this.cameraMove,this.camera.position);this.camera.position.x+=e.x*v.e,this.camera.position.y+=e.y*v.e,this.camera.position.z+=e.z*v.e,this.camera.lookAt(this.cameraTarget)}}else this.planetLoader.update(this.clock.getElapsedTime());this.render()}requestAnimationFrame(this.animate.bind(this))}},{key:"setSceneModel",value:function(e){this.cameraTarget=v.c[this.currentStep][0],this.scene.add(e)}},{key:"setCamera",value:function(e,t){this.camera.position.copy(e),this.camera.lookAt(t)}},{key:"setCameraByStep",value:function(e,t){var n=void 0!==e?e:this.currentStep;this.setCamera(v.c[n][2],v.c[n][0]),t&&(this.cameraMove=i.i(f.b)(v.c[n][1],v.c[n][2],.5))}},{key:"setActive",value:function(e){this.flags.isActive=e}},{key:"setStep",value:function(e){this.currentStep=e}},{key:"switchBuildings",value:function(e){var t=this,n={p:0,y:0},a="wroclavia"===e?t.models.wpt:t.models.wroclavia,s="wroclavia"===e?t.models.wroclavia:t.models.wpt,r={p:0,y:2*Math.PI*1},o=!1;this.flags.isTransition=!0,this.cameraMove=i.i(f.a)(0,50,0),"wpt"===this.currentModel&&h.TweenMax.to(n,1,{p:1,y:2*Math.PI*-1*1,ease:h.Power4.easeIn,onUpdate:function(){a.rotation.y=n.y,n.p>.5&&!o&&(t.scene.add(s),h.TweenMax.to(r,1,{p:1,y:0,ease:h.Power4.easeOut,onUpdate:function(){s.rotation.y=r.y},onComplete:function(){t.flags.isTransition=!1}}),o=!0)},onComplete:function(){t.scene.remove(a)}})}},{key:"init",value:function(){var e=this;return new s.a(function(t){e.updateSize(),e.addCamera(),e.initRenderer(),e.render(),e.loadModels().then(function(){e.setSceneModel(e.models.wpt),e.setCameraByStep(e.currentStep,!0),e.initEvents(),e.flags.isInitialized=!0,t()})})}}]),e}();t.a=w},45:function(e,t,i){"use strict";i.d(t,"e",function(){return r}),i.d(t,"b",function(){return o}),i.d(t,"f",function(){return c}),i.d(t,"d",function(){return d}),i.d(t,"a",function(){return l}),i.d(t,"c",function(){return u}),i.d(t,"g",function(){return w});var n=i(12),a=i(24),s={basic:1752220,accent:3447003},r=.01,o=.5,c=.1,d=.8,l={models:"static/models/"},u=[[i.i(a.a)(-.1,1.6,-1.4),i.i(a.a)(-4.4,2.5,-1.8),i.i(a.a)(3,3.8,9.3)],[i.i(a.a)(-2.4,1.6,-1.4),i.i(a.a)(.2,7.2,5.7),i.i(a.a)(-1.5,30.2,1)],[i.i(a.a)(-2.4,1.6,-1.4),i.i(a.a)(.2,7.2,5.7),i.i(a.a)(-1.5,30.2,1)]],h=new n.m({color:s.basic,linewidth:2}),f=new n.m({color:s.accent,lineWidth:4}),p=new n.n({color:s.basic,side:n.o,transparent:!0,opacity:.25,wireframe:!0,blending:n.p}),v=new n.n({color:s.basic,side:n.o,transparent:!0,opacity:.2}),m=new n.n({color:s.accent,side:n.o,transparent:!0,opacity:.9,blending:n.p}),w={edgesMat:h,edgesMatAccent:f,wireframeMat:p,facesMat:v,facesMatAccent:m}},46:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a});var n=[{model:"wpt-buildings.json",edges:!0,wireframe:!0,faces:!0},{model:"wpt-terrain.json",edges:!1,wireframe:!0,faces:!0,position:[0,-.05,0]},{model:"wpt-green.json",edges:!0,wireframe:!1,faces:!0},{model:"wpt-building-alfa.json",edges:!0,wireframe:!0,faces:!0}],a=[{model:"wroclavia-buildings.json",edges:!0,wireframe:!0,faces:!0},{model:"wroclavia-terrain.json",edges:!1,wireframe:!0,faces:!0}]},47:function(e,t,i){"use strict";function n(e){for(var t=new h.t(e,2),i=s(p.orange,!0),n=[],a=t.faces.length,r=0;r<a;r+=1)n.push(i);for(var o=0;o<t.vertices.length;o+=1){var c=t.vertices[o];c.x+=-v.noise/2+Math.random()*v.noise,c.y+=-v.noise/2+Math.random()*v.noise,c.z+=-v.noise/2+Math.random()*v.noise}for(var d=0;d<a;d+=1)t.faces[d].materialIndex=d;var l=new h.l(t,new h.u(n));return l.castShadow=!0,l.receiveShadow=!0,l}function a(e){var t=new h.t(e,2),i=s(p.blue,!0,!0,.25,h.p);return new h.l(t,i)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.v;return t?new h.n({color:e,shading:h.x,wireframe:t,transparent:i,opacity:n,blending:a,side:h.o}):new h.w({color:e,shading:h.x,wireframe:t,transparent:i,opacity:n,blending:a,side:h.o,emissive:2555904,roughness:.9})}var r=i(25),o=i.n(r),c=i(26),d=i.n(c),l=i(27),u=i.n(l),h=i(12),f=i(39),p=(i.n(f),{blue:3447003,green:3066993,orange:15619620,darkOrange:13849600,yellow:3426654}),v={noise:.8,radius:12,radius_outer_factor:1.2,rotate_speed:.03,scale_speed:2},m=function(){function e(t){d()(this,e),this.isActive=!1,this.progress=0,this.previous=0,this.scaleFactor=0,this.scale=1,this.size=t||v.radius,this.mesh=new h.h,this.planet=n(this.size),this.wireframe=a(this.size*v.radius_outer_factor),this.mesh.add(this.planet),this.mesh.add(this.wireframe),this.addLights()}return u()(e,[{key:"addLights",value:function(){var e=new h.r(6697796,2);this.mesh.add(e);var t=new h.s(16777215,1.5);t.position.set(200,100,200),t.shadow.camera.left=-400,t.shadow.camera.right=400,t.shadow.camera.top=400,t.shadow.camera.bottom=-400,t.shadow.camera.near=1,t.shadow.camera.far=1e3,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,this.mesh.add(t)}},{key:"update",value:function(){this.isActive&&(this.planet.rotation.z-=v.rotate_speed/10,this.planet.rotation.y-=v.rotate_speed,this.wireframe.rotation.z+=v.rotate_speed/2,this.wireframe.rotation.y-=v.rotate_speed/2,this.mesh.scale.set(this.scale,this.scale,this.scale))}},{key:"updateScale",value:function(e){this.scale=1-(Math.abs(Math.sin(e*v.scale_speed))/6+this.scaleFactor)}},{key:"getMesh",value:function(){return this.mesh}},{key:"clearFaces",value:function(){for(var e=this.planet.geometry.faces.length,t=0;t<e;t+=1)this.planet.material.materials[t]=s(p.orange,!0),this.planet.material.materials[t].needsUpdate=!0}},{key:"activate",value:function(){this.isActive=!0}},{key:"updateFaces",value:function(e){for(var t=this.planet.geometry.faces.length,i=Math.min(Math.ceil(t*e+1),t),n=this.previous;n<i;n+=1)this.planet.material.materials[n]=s(p.orange),this.planet.material.materials[n].needsUpdate=!0;this.previous=Math.max(this.progress-1,0),this.progress=i}},{key:"dispose",value:function(){var e=this;return new o.a(function(t){var i={progress:1};f.TweenMax.to(i,1,{progress:0,ease:f.Power4.easeIn,onUpdate:function(){e.scale=i.progress},onComplete:function(){t()}})})}}]),e}();t.a=m},48:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(23),a=i(43),s=i.n(a),r=i(42);n.a.config.productionTip=!1,new n.a({el:"#app",router:r.a,template:"<App/>",components:{App:s.a}})},49:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},50:function(e,t,i){"use strict";function n(e){var t=e.wheelDelta;1!=l&&(t<=-d.sensivity&&(l=!0,h.currentStep!==h.totalSlides-1&&h.currentStep++,s(),a(d.duration)),t>=d.sensivity&&(l=!0,0!==h.currentStep&&h.currentStep--,s(),a(d.duration)))}function a(e){setTimeout(function(){l=!1},e)}function s(){h.active=h.animatedSteps.reduce(function(e,t){return h.currentStep===t||e},!1);var e=h.animationMap[h.currentStep];void 0!==e&&(h.renderStep=e)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(40),o=(i.n(r),i(41)),c=i.n(o),d={sensivity:30,duration:600},l=!1,u=void 0,h={active:!1,animatedSteps:[1,2,3],animationMap:{1:0,2:1,3:2},currentStep:0,renderStep:0,totalSlides:6};t.default={name:"landing",components:{Three:c.a},data:function(){return{animationDetails:h}},mounted:function(){window.addEventListener("wheel",i.i(r.throttle)(n,60),!1),u=this.$refs.landing}}},51:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(44),a=0;t.default={name:"threeDebug",props:["isActive","step"],data:function(){return{}},watch:{step:function(e){console.log("step:",e),this.animation.setStep(e),2===e&&1===a&&this.animation.switchBuildings("wroclavia"),1===e&&2===a&&this.animation.switchBuildings("wpt"),a=e},isActive:function(e){this.animation.setActive(e)}},mounted:function(){var e={active:!0,debug:!0,container:this.$refs.scene,step:0};this.animation=new n.a(e),this.animation.init()}}},88:function(e,t){},89:function(e,t){},90:function(e,t){},91:function(e,t,i){function n(e){i(90)}var a=i(21)(i(50),i(94),n,"data-v-558b8ed5",null);e.exports=a.exports},92:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"scene",staticClass:"Scene"})},staticRenderFns:[]}},93:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]}},94:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"landing",staticClass:"Landing",class:["slide-"+e.animationDetails.currentStep]},[i("div",{staticClass:"background",class:{isOff:!e.animationDetails.active}},[i("Three",{attrs:{isActive:e.animationDetails.active,step:e.animationDetails.renderStep}})],1),e._v(" "),i("div",{staticClass:"background-map"}),e._v(" "),i("section",{class:{isActive:0===e.animationDetails.currentStep},attrs:{id:"slide-0"}},[i("h1",[e._v("slide "+e._s(e.animationDetails.currentStep))])]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),i("section",{attrs:{id:"slide-3"}}),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),i("div",{staticClass:"Menu",class:{isActive:e.animationDetails.currentStep>0}},[e._m(5),e._v(" "),e._m(6)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"slide-1"}},[i("h1",[e._v("Welcome to PGS")]),e._v(" "),i("h2",[e._v("lorem ipsum dolor sit amet")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"slide-2"}},[i("h1",[e._v("hello world - slide 2")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"slide-4"}},[i("h1",[e._v("hello world - slide 4")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"slide-5"}},[i("h1",[e._v("hello world - slide 5")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mouse"},[i("div",{staticClass:"scroll-wheel"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"logo"},[i("span",[e._v("PGS Software")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[e._v("About")]),e._v(" "),i("li",[e._v("Contact")])])}]}}},[48]);
//# sourceMappingURL=app.51c22661fdcc82bb70e2.js.map